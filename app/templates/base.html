<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{% block title %}TableQueue{% endblock %}</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/>

  <style>
    .bg-grid{
      background-image: radial-gradient(circle at 1px 1px, rgba(15,23,42,.06) 1px, transparent 0);
      background-size: 20px 20px;
    }
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900 bg-grid">
  {% include "partials/nav.html" %}
  <main class="mx-auto max-w-6xl px-4 py-8">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-6 grid gap-3">
          {% for category, message in messages %}
            {% set tone = "bg-emerald-50 text-emerald-900 border-emerald-200" if category=="success" else
                         "bg-amber-50 text-amber-900 border-amber-200" if category=="warning" else
                         "bg-rose-50 text-rose-900 border-rose-200" if category=="danger" else
                         "bg-slate-100 text-slate-900 border-slate-200" %}
            <div class="rounded-2xl border px-4 py-3 {{ tone }}">
              <div class="flex items-start justify-between gap-4">
                <div class="text-sm leading-relaxed">{{ message }}</div>
                <button class="text-sm opacity-70 hover:opacity-100" onclick="this.parentElement.parentElement.remove()">
                  <i class="bi bi-x-lg"></i>
                </button>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <footer class="pb-10 text-center text-xs text-slate-500">
    © {{ (now().year if now else 2026) }} TableQueue • ULTRA Edition
  </footer>

  <script>
    const btn = document.getElementById("mobileBtn");
    const menu = document.getElementById("mobileMenu");
    if (btn && menu) btn.addEventListener("click", () => menu.classList.toggle("hidden"));
  </script>
</body>
</html>
